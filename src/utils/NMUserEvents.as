package utils{	import MD5.MD5;		import flash.display.Sprite;	import flash.events.IOErrorEvent;	import flash.net.URLLoader;	import flash.net.URLRequest;	import flash.net.URLRequestMethod;	import flash.net.URLVariables;
		public class NMUserEvents extends Sprite	{				private var videoPath:String;		private var referer:String;		private var nameEvent:int;		private var userRequest:URLRequest;		private var userLoader:URLLoader;		private var userVars:URLVariables;		private var appVers:String;		private var time:Date;				private var paramArr:Array;		private var value:String;		private var i:int;				public function NMUserEvents()		{						paramArr = new Array();						userRequest = new URLRequest("http://stats.lifenews.ru/vstats2.php");			userLoader = new URLLoader();			userLoader.addEventListener(IOErrorEvent.IO_ERROR, ioErrorUserLoader);					}				private function ioErrorUserLoader(event:IOErrorEvent):void		{						trace("[ERROR] ioErrorEvent UserEventLoader");					}				public function detectEvent(ev:int, vpath:String, ref:String):void		{						this.nameEvent = ev;			this.videoPath = vpath;			this.appVers = NMVideoPlayer.appVersion;			this.referer = ref;			time = new Date();						userVars = new URLVariables();			userVars.t = time.time;			userVars.ev = nameEvent;			userVars.ref = referer;			userVars.url = videoPath;			userVars.v = appVers;						paramArr = [];			for (var param:String in userVars) {								paramArr.push(param + ":" + userVars[param]);							}			paramArr.sort();			paramArr.push("bfhyH80D7GhTy93hLKhppaD10k");						value = paramArr.join(":").toString();						userVars.h = MD5.MD5.encrypt(value);						userRequest.data = userVars;			userRequest.method = URLRequestMethod.GET;			userLoader.load(userRequest);					}			}	}